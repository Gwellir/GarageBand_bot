# GarageBand bot

### Оптимизации

0. Поправить обработку нажатия кнопок с прошлых стадий диалога

1. Интегрировать сильно связанные с контекстом диалога функции из `tgbot.stages` в `tgbot.dialog.Dialog`
    и унифицировать их для установки соответствующих атрибутов моделей через setattr
   
2. Добавить привязку к незаконченной заявке для пользователя между перезапусками бота
    (предлагать выбор?/уничтожать отложенные заявки через некоторое время?)
   
3. Добавить обработку предельного количества фотографий.

4. Добавить логирование

5. Дополнить тестирование

### Работа с пользователем

1. На любое сообщение от нового пользователя должен следовать ответ:
   
    "**Здравствуйте, вы обратились в службу приёма заявок Garage Band. Выберите действие**"
   
    Кнопки:
    - создать новую заявку
    - поиск заявок
    - разместить рекламу
    
    (Пользователь сохраняется в базе)
    

2. При выборе "Создать новую заявку" должен следовать ответ:
   
    "**Вы собираетесь создать новую заявку на обслуживание. Продолжить?**"
   
    Кнопки:
    - Начать оформление
    - Отменить (вернуться на уровень 1)
    

3. При выборе "Начать оформление" должен следовать ответ:
   
    _(для новых пользователей)_
    
    "**Представьтесь, пожалуйста**" (ожидает ввода имени)
   

4. После введения имени:

    _(для известных пользователей)_
    
    "**%FULL_NAME%, напишите название заявки - что нужно сделать**" (ожидает ввод наименования заявки)
   

5. После ввода наименования:

    "**Расскажите подробнее, чтобы мастер мог оценить объем работы**" (ожидает ввод подробного описания) (лимит символов?)
   

6. После ввода описания:

    "**Вы можете добавить к посту фотографии, так будет понятнее**"
   
    Кнопки:
    - Добавить
    - Следующий шаг (переход к 8)
    

7. После кнопки "Добавить" 

    "**Отправьте фотографию**" (при получении изображения вернуться к этому же шагу)
   
    Кнопка:
    - Закончить (переход к 8)
    

8. После завершения этапа фотографий

    "**В каком городе, районе Вы хотели бы провести ремонт?**" (ожидает текст)
   

9. После указания района

    "**Укажите свой номер телефона для связи**" (ожидает текст) (формат?)
   

10. После указания телефона 
    
    "**Вы молодец! Смотрите, что у нас получилось:**"
    
        %photo%
        %task name%
        %task description%
        %phone% %username%
    
    Кнопки:
    - Публикуем
    - Начать заново
    
11. Публикация
    
    "**Благодарим, ваша заявка опубликована!**"

    Кнопки:
    - Начать заново
    

#### Доделать поиск заявок и размещение рекламы в каком-то виде

