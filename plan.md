# GarageBand features/issues planning

### Оптимизации

0. CRITICAL

    ~~возможность постить для пользователей без @username~~
    
    ~~Отделить черновики от готовых заявок~~

    ~~Проверка длин текста в полях~~

    ~~Стриппинг форматирования~~

1. ~~Поправить обработку нажатия кнопок с прошлых стадий диалога~~
    
    ~~Чтобы выводилось предупреждение~~
    
    Переработать диалоги на базе ConversationHandler

2. ~~Интегрировать сильно связанные с контекстом диалога функции из `tgbot.stages` в `tgbot.dialog.Dialog`
    и унифицировать их для установки соответствующих атрибутов моделей через setattr~~
   
3. Добавить привязку к незаконченной заявке для пользователя между перезапусками бота
    (предлагать выбор?/уничтожать отложенные заявки через некоторое время?)
   
4. ~~Добавить предел на обработку количества фотографий.~~
    **Только одно фото может быть приложено к заявке**
    ~~Добавить авторесайзинг?~~ выполняется на стороне телеграма
    Добавить сохранение файла перед передачей в dialog?

5. ~~Добавить логирование~~

    Логирование в БД

6. Дополнить тестирование

    Сделать логику DialogProcessor программно тестируемой

7. ~~Подчищать фото к брошенным запросам, чтобы старые не оказывались в новых заявках~~

8. ~~Выделить telegram-specific ответы из dialog.py~~

9. ~~При использовании кнопки "Публикуем" из предыдущей заявки, публикуется пустая заявка
    со следующим номером~~

10. Реализовать отсылку в АПИ ТГ через очередь сообщений

11. ~~Настроить автоматическую проверку кода~~

12. Настроить автоматический деплой

13. Логирование сообщений пользователей в базе